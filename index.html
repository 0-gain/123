<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="./font/font-awesome-4.7.0/font-awesome-4.7.0/css/font-awesome.min.css">
    <script>
        window.onload = function () {
            const userName = document.querySelector('.logincon .form .item .userName');
            const password = document.querySelector('.logincon .form .item .password');
            const Login = document.querySelector('#login .logincon .Login');
            const Register = document.querySelector('#login .logincon .Register');

            Login.addEventListener('click', function () {
                let strName = userName.value;
                let strWord = password.value;
                if(strName != '' && strWord != ''){
                    const xhr = new XMLHttpRequest();
                    xhr.open('GET',`http://127.0.0.1:8000/server-login?userName=${strName}&password=${strWord}`);
                    xhr.send();
                    xhr.onreadystatechange = function(){
                        if(xhr.readyState == 4){
                            if(xhr.status >= 200 && xhr.status < 300){
                                if(xhr.response == 'ok'){
                                    window.open('http://www.baidu.com')
                                    console.log('登陆成功');
                                }else if(xhr.response == 'useName') {
                                    alert('密码错误')
                                }else{
                                    if(confirm('没有此用户，是否注册？')){
                                        window.location = './register.html'
                                    }else{
                                        console.log('用户已经取消');
                                    }
                                }
                            }
                        }
                }
                }
            })
        }
    </script>
</head>

<body>
    <div id="login">
        <div class="logincon">
            <h1>Login</h1>
            <div class="form">
                <div class="item">
                    <i class="fa fa-user-circle-o" aria-hidden="true"></i></i>
                    <input type="text" placeholder="Usename" class="userName">
                </div>
                <div class="item">
                    <i class="fa fa-key" aria-hidden="true"></i>
                    <input type="password" placeholder="Password" class="password">
                </div>
            </div>
            <a href="javascript:;" class="Login btn">Login</a>
            <a href="./register.html" class="Register btn">Register</a>
        </div>
    </div>
</body>

</html>