<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音乐台</title>
    <link rel="stylesheet" href="./css/tai.css">
</head>

<body>
    <div id="wrap">
        <div class="scrollBar"></div>
        <div class="head">
            <div class="head-top">
                <!-- logo -->
                <h1 class="logo">
                    <a href="javascript:;">
                        <img src="./img/logo.png" alt="">
                    </a>
                </h1>
                <!-- 面包屑导航 -->
                <a href="javascript:;" class="menuBtn"></a>
                <!-- 按钮排 -->
                <div class="btns">
                    <a href="javascript:;" class="search">搜索</a>
                    <a href="javascript:;">登录</a>
                    <a href="javascript:;">注册</a>
                </div>
            </div>
            <div class="head-bottom">
                <form>
                    <input type="text" placeholder="请碰我一下">
                    <input type="submit" value="搜索">
                </form>
            </div>
            <ul class="mask">
                <li>
                    <a href="javascript:;">首页</a>
                </li>
                <li>
                    <a href="javascript:;">MV</a>
                </li>
                <li>
                    <a href="javascript:;">悦单</a>
                </li>
                <li>
                    <a href="javascript:;">V榜</a>
                </li>
                <li>
                    <a href="javascript:;">音乐</a>
                </li>
                <li>
                    <a href="javascript:;">商城</a>
                </li>
                <li>
                    <a href="javascript:;">节目</a>
                </li>
                <li>
                    <a href="javascript:;">饭团</a>
                </li>
                <li>
                    <a href="javascript:;">咨询</a>
                </li>
                <li>
                    <a href="javascript:;">我的家</a>
                </li>
                <li>
                    <a href="javascript:;">APP下载</a>
                </li>
                <li>
                    <a href="javascript:;">热门应用</a>
                </li>
            </ul>
        </div>
        <div class="content">
            <div>
                <div class="nav-drag-wrapper">
                    <ul class="list">
                        <li class="active">
                            <a href="javascript:;">首页</a>
                        </li>
                        <li>
                            <a href="javascript:;">MV</a>
                        </li>
                        <li>
                            <a href="javascript:;">悦单</a>
                        </li>
                        <li>
                            <a href="javascript:;">V榜</a>
                        </li>
                        <li>
                            <a href="javascript:;">Tom</a>
                        </li>
                        <li>
                            <a href="javascript:;">Lily</a>
                        </li>
                        <li>
                            <a href="javascript:;">Jerry</a>
                        </li>
                        <li>
                            <a href="javascript:;">Bob</a>
                        </li>
                        <li>
                            <a href="javascript:;">郑秀晶</a>
                        </li>
                        <li>
                            <a href="javascript:;">宋茜</a>
                        </li>
                        <li>
                            <a href="javascript:;">刘逸云</a>
                        </li>
                        <li>
                            <a href="javascript:;">崔雪莉</a>
                        </li>
                        <li>
                            <a href="javascript:;">音乐</a>
                        </li>
                        <li>
                            <a href="javascript:;">商城</a>
                        </li>
                        <li>
                            <a href="javascript:;">节目</a>
                        </li>
                        <li>
                            <a href="javascript:;">饭团</a>
                        </li>
                        <li>
                            <a href="javascript:;">咨询</a>
                        </li>
                        <li>
                            <a href="javascript:;">我的家</a>
                        </li>
                        <li>
                            <a href="javascript:;">APP下载</a>
                        </li>
                        <li>
                            <a href="javascript:;">热门应用</a>
                        </li>
                    </ul>
                </div>
                <div class="carousel-wrap" needCarousel>
                    <div class="point"></div>
                </div>
                <div class="tab-wrap">
                    <div class="tab-head">
                        <h2>MV主播</h2>
                        <span>更多&#62;</span>
                    </div>
                    <div class="tab-nav">
                        <a href="javascript:;">全部</a>
                        <a href="javascript:;">内地</a>
                        <a href="javascript:;">刚果人民共和国</a>
                        <a href="javascript:;">欧美</a>
                        <a href="javascript:;">韩国</a>
                        <a href="javascript:;">日本</a>
                        <div class="smallG"></div>
                    </div>
                    <div class="tab-content">
                        <ul class="tab-loading"></ul>
                        <ul class="list">
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/a.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/b.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/c.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/d.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/e.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/f.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <ul class="tab-loading"></ul>
                    </div>
                </div>
                <div class="tab-wrap">
                    <div class="tab-head">
                        <h2>MV主播</h2>
                        <span>更多&#62;</span>
                    </div>
                    <div class="tab-nav">
                        <a href="javascript:;">全部</a>
                        <a href="javascript:;">内地</a>
                        <a href="javascript:;">刚果人民共和国</a>
                        <a href="javascript:;">欧美</a>
                        <a href="javascript:;">韩国</a>
                        <a href="javascript:;">日本</a>
                        <div class="smallG"></div>
                    </div>
                    <div class="tab-content">
                        <ul class="tab-loading"></ul>
                        <ul class="list">
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/a.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/b.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/c.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/d.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/e.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/f.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <ul class="tab-loading"></ul>
                    </div>
                </div>
                <div class="tab-wrap">
                    <div class="tab-head">
                        <h2>MV主播</h2>
                        <span>更多&#62;</span>
                    </div>
                    <div class="tab-nav">
                        <a href="javascript:;">全部</a>
                        <a href="javascript:;">内地</a>
                        <a href="javascript:;">刚果人民共和国</a>
                        <a href="javascript:;">欧美</a>
                        <a href="javascript:;">韩国</a>
                        <a href="javascript:;">日本</a>
                        <div class="smallG"></div>
                    </div>
                    <div class="tab-content">
                        <ul class="tab-loading"></ul>
                        <ul class="list">
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/a.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/b.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/c.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/d.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/e.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/f.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <ul class="tab-loading"></ul>
                    </div>
                </div>
                <div class="tab-wrap">
                    <div class="tab-head">
                        <h2>MV主播</h2>
                        <span>更多&#62;</span>
                    </div>
                    <div class="tab-nav">
                        <a href="javascript:;">全部</a>
                        <a href="javascript:;">内地</a>
                        <a href="javascript:;">刚果人民共和国</a>
                        <a href="javascript:;">欧美</a>
                        <a href="javascript:;">韩国</a>
                        <a href="javascript:;">日本</a>
                        <div class="smallG"></div>
                    </div>
                    <div class="tab-content">
                        <ul class="tab-loading"></ul>
                        <ul class="list">
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/a.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/b.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/c.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/d.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/e.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/f.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <ul class="tab-loading"></ul>
                    </div>
                </div>
                <div class="tab-wrap">
                    <div class="tab-head">
                        <h2>MV主播</h2>
                        <span>更多&#62;</span>
                    </div>
                    <div class="tab-nav">
                        <a href="javascript:;">全部</a>
                        <a href="javascript:;">内地</a>
                        <a href="javascript:;">刚果人民共和国</a>
                        <a href="javascript:;">欧美</a>
                        <a href="javascript:;">韩国</a>
                        <a href="javascript:;">日本</a>
                        <div class="smallG"></div>
                    </div>
                    <div class="tab-content">
                        <ul class="tab-loading"></ul>
                        <ul class="list">
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/a.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/b.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/c.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/d.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/e.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <img src="./img/f.jpg" alt="">
                                    <span>君に贈る花がないがないがないがないがないがないがない</span>
                                </a>
                                <div class="tap-discuss">
                                    <div class="left">
                                        <span></span>
                                        <span>15968</span>
                                    </div>
                                    <div class="right">
                                        <span></span>
                                        <span>17</span>
                                    </div>
                                </div>
                            </li>
                        </ul>
                        <ul class="tab-loading"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="./js/common.js"></script>
<script>
    window.onload = function () {
        // 全面禁止默认行为
        document.addEventListener('touchstart', function (ev) {
            ev = ev || event;
            ev.stopPropagation();
            ev.preventDefault();
        }, {
            passive: false
        });

        //rem适配原理：改变了一个元素在不同设备上占据的css像素的个数
        (function () {
            var styleNode = document.createElement('style');
            var w = document.documentElement.clientWidth / 16;
            styleNode.innerHTML = 'html{font-size:' + w + 'px!important}';
            document.head.appendChild(styleNode);
        })()

        // 失获焦点
        changeFocus()

        function changeFocus() {
            var inputNode = document.querySelector('#wrap .head .head-bottom form input[type=text]');
            inputNode.addEventListener('touchstart', function (ev) {
                ev = ev || event;
                this.focus();
                ev.stopPropagation();
                ev.preventDefault();
            })
            document.addEventListener('touchstart', function () {
                inputNode.blur()
            })
        }

        // 面包屑
        CMCFMenuBtn();

        function CMCFMenuBtn() {
            var maskNode = document.querySelector('#wrap .head .mask');
            var menuBtn = document.querySelector('#wrap .head .head-top .menuBtn');
            var isXX = true;
            menuBtn.addEventListener('touchstart', function (ev) {
                ev = ev || event;
                if (isXX) {
                    menuBtn.classList.add('active');
                    maskNode.style.display = 'block';
                } else {
                    menuBtn.classList.remove('active');
                    maskNode.style.display = 'none';
                }
                isXX = !isXX;
                ev.stopPropagation();
                ev.preventDefault();
            })
            document.addEventListener('touchstart', function () {
                menuBtn.classList.remove('active');
                maskNode.style.display = 'none';
                isXX = !isXX;
            })
            maskNode.addEventListener('touchstart', function (ev) {
                ev = ev || event;
                maskNode.style.display = 'block';
                ev.stopPropagation();
                ev.preventDefault();
            })
        }

        // 可以拖拽的导航栏
        dragNav();

        function dragNav() {
            // 移动区域
            var navNode = document.querySelector('#wrap .content .nav-drag-wrapper')
            // 移动元素
            var listNode = document.querySelector('#wrap .content .nav-drag-wrapper .list')
            //手指一开始的位置
            var startX = 0;
            var startY = 0;
            //元素一开始的位置
            var elementX = 0;
            var elementY = 0;
            var translateX = 0;
            var translateY = 0;
            //元素能够移动的最小距离-602
            var minX = navNode.clientWidth - listNode.offsetWidth;
            //  console.log(minX)
            /* 
                快速滑屏的逻辑
                    一次滑动屏幕所移动的时间与距离
             */
            //move过程中每移动一次开始的位置  
            var lastPoint = 0;
            //move过程中每移动一次开始的时间
            var lastTime = 0;
            //位置差
            var pointDis = 0;
            //时间差
            var timeDis = 1;
            var speed = 0;
            /*
             * 防抖动
             * 
             * 1.判断用户首次滑屏的方向
             * 2.如果是x轴
             * 		以后不管用户怎么滑都会抖动
             * 3.如果是y轴
             * 		以后不管用户怎么滑都不会抖动	
             * */
            var isX = true;
            var isFirst = true;
            listNode.addEventListener('touchstart', function (ev) {
                ev = ev || event;
                var touchX = ev.changedTouches[0];

                startX = touchX.clientX;
                startY = touchX.clientY;
                elementX = common.css(listNode, 'translateX');
                elementY = common.css(listNode, 'translateY');
                listNode.style.transition = 'none'

                lastTime = new Date().getTime();
                lastPoint = touchX.clientX;
                //  console.log('lastPoint'+lastPoint,'startX'+startX)
                isFirst = true;
                isX = true;
                //清除速度的残留
                pointDis = 0;

            })
            listNode.addEventListener('touchmove', function (ev) {
                //看门狗  二次以后的防抖动
                if (!isX) {
                    return;
                }
                ev = ev || event;
                var touchX = ev.changedTouches[0];
                //实时的位置
                var nowX = touchX.clientX;
                var nowY = touchX.clientY;
                //计算移动的差值(往左-------> 负数，往右------>正数,一次move的差值)
                var disX = nowX - startX;
                var disY = nowY - startY;
                translateX = elementX + disX;
                translateY = elementY + disY;
                var nowTime = new Date().getTime();
                var nowPoint = touchX.clientX;
                //  pointDis是move过程中的每一次的差值
                pointDis = nowPoint - lastPoint;
                timeDis = nowTime - lastTime;

                // console.log('pointDis:'+pointDis,'disX:'+disX,'nowX:'+nowX,'nowPoint'+nowPoint)
                lastTime = nowTime;
                lastPoint = nowPoint;

                if (isFirst) {
                    isFirst = false;
                    if (Math.abs(disY) > Math.abs(disX)) {
                        //y轴上滑
                        isX = false;
                        //首次防抖动
                        return;
                    }
                }

                /*手动橡皮筋效果
                 * 
                 * 在move的过程中，每一次手指touchmove真正的有效距离慢慢变小，元素的滑动距离还是在变大
                 * 
                 * pointDis：整个手指touchmove真正的有效距
                 * 
                 * translateX = damu.css(item,"translateX") + pointDis*scale;!!!
                 * 
                 * 手动橡皮筋效果与快速橡皮筋效果的冲突
                 *      手动橡皮筋效果无效
                 *      1.给listNode.handMove = true,表示进入手动橡皮筋效果，快速的将不执行
                 * */

                if (translateX > 0) {
                    listNode.handMove = true;
                    var scale = document.documentElement.clientWidth / ((document.documentElement
                        .clientWidth + translateX) * 1.5);
                    translateX = common.css(listNode, 'translateX') + pointDis * scale;
                } else if (translateX < minX) {
                    item.handMove = true;
                    var over = minX - translateX;
                    var scale = document.documentElement.clientWidth / ((document.documentElement
                        .clientWidth + over) * 1.5);
                    translateX = common.css(listNode, "translateX") + pointDis * scale;
                }
                common.css(listNode, "translateX", translateX);

                speed = pointDis / timeDis;
                if (Math.abs(speed) > 0.5) {
                    listNode.handMove = false;
                    // console.log(speed)
                }
                // console.log('开始的位置'+lastPoint,'现在的位置'+nowPoint,'translateX'+translateX)
            })
            listNode.addEventListener('touchend', function () {
                var translateX = common.css(listNode, 'translateX');
                if (!listNode.handMove) {
                    // 快速滑屏(速度越大，位移越大)
                    speed = pointDis / timeDis;
                    translateX += speed * 200
                    var targetX = translateX;
                    var time = Math.abs(speed) * 0.2;
                    time = time < 0.8 ? 0.8 : time;
                    time = time > 2 ? 2 : time;

                    //快速滑屏的橡皮筋效果
                    var bsr = "";
                    if (targetX > 0) {
                        targetX = 0;
                        bsr = "cubic-bezier(.26,1.51,.68,1.54)"
                    } else if (targetX < minX) {
                        targetX = minX;
                        bsr = "cubic-bezier(.26,1.51,.68,1.54)"
                    }
                    listNode.style.transition = time + "s " + bsr + " transform";
                    common.css(listNode, 'translateX', targetX)
                } else {
                    listNode.style.transition = "1s transform";
                    if (translateX > 0) {
                        translateX = 0;
                        common.css(listNode, 'translateX', translateX)
                    } else if (translateX < minX) {
                        translateX = minX;
                        common.css(listNode, 'translateX', translateX)
                    }


                }
            })
        }

        // 无缝轮播
        swiper();

        function swiper() {
            var arr = ['1.jpg', '2.jpg', '3.jpg', '4.jpg', '5.jpg'];
            common.carousel(arr);
        }
        //导航点击变色
        changeColor();

        function changeColor() {
            var listNode = document.querySelector('#wrap .content .nav-drag-wrapper .list')
            var liNode = document.querySelectorAll('#wrap .content .nav-drag-wrapper .list li')
            listNode.addEventListener('touchstart', function () {
                this.isMove = false;
            })
            listNode.addEventListener('touchmove', function () {
                this.isMove = true;
            })
            listNode.addEventListener('touchend', function (ev) {
                if (this.isMove) {
                    return;
                }
                ev = ev || event;
                var touchC = ev.changedTouches[0];
                var target = touchC.target.parentNode;
                for (var i = 0; i < liNode.length; i++) {
                    liNode[i].classList.remove('active');
                }
                target.classList.add('active');
            })
        }

        // tab选项卡

        tab();

        function tab() {
            var content = document.querySelectorAll('#wrap .content .tab-wrap .tab-content')

            for (var i = 0; i < content.length; i++) {
                move(content[i]);
            }
        }

        function move(content) {
            var wrap = document.querySelector('#wrap .content .tab-wrap')
            var loadings = content.querySelectorAll('.tab-loading')
            var smallG = content.parentNode.querySelector('.tab-nav .smallG')
            var aNodes = content.parentNode.querySelectorAll('.tab-nav a');
            var w = wrap.offsetWidth;
            common.css(content, 'translateX', -w)
            var start = {
                x: 0,
                y: 0
            };
            var element = {
                x: 0,
                y: 0
            };
            // 防抖动
            var isX = true;
            var isFirst = true;
            // 小绿的索引
            var now = 0;
            // 让jump函数在move时只执行一次
            var isOver = false;
            content.addEventListener('touchstart', function (ev) {
                if (isOver) {
                    return;
                }
                ev = ev || event;
                var touchC = ev.changedTouches[0];
                start.x = touchC.clientX;
                start.y = touchC.clientY;
                element.x = common.css(content, 'translateX')
                element.y = common.css(content, 'translateY')
                content.style.transition = 'none';


                isX = true;
                isFirst = true;
            })
            content.addEventListener('touchmove', function (ev) {
                if (isOver) {
                    return;
                }
                if (!isX) {
                    return;
                }
                ev = ev || event;
                var touchC = ev.changedTouches[0];
                var now = {
                    x: 0,
                    y: 0
                };
                var dis = {
                    x: 0,
                    y: 0
                };
                now.x = touchC.clientX;
                now.y = touchC.clientY;
                dis.x = now.x - start.x;
                dis.y = now.y - start.y;
                if (isFirst) {
                    isFirst = false;
                    if (Math.abs(dis.y) > Math.abs(dis.x)) {
                        isX = false;
                    }
                }
                common.css(content, 'translateX', element.x + dis.x);

                jump(dis.x)
            })
            content.addEventListener('touchend', function (ev) {
                if (isOver) {
                    return;
                }
                ev = ev || event;
                var touchC = ev.changedTouches[0];
                var now = {
                    x: 0,
                    y: 0
                };
                var dis = {
                    x: 0,
                    y: 0
                };
                now.x = touchC.clientX;
                dis.x = now.x - start.x;

                /* 
                    元素没有滑倒1/2的位置则回到-w的位置
                */
                if (Math.abs(dis.x) <= w / 2) {
                    content.style.transition = '1s transform';
                    common.css(content, 'translateX', -w)

                }
            })

            function jump(disX) {
                if (isOver) {
                    return;
                }
                /* 
                    元素移至1/2后进行跳转
                        右滑是正，左滑为负
                */
                if (Math.abs(disX) > w / 2) {
                    isOver = true;
                    content.style.transition = "1s transform";
                    var targetX = disX > 0 ? 0 : -2 * w;
                    common.css(content, 'translateX', targetX)


                    /* 
                        需求：动画结束后，需要将请求回来的数据渲染在页面上

                    */

                    content.addEventListener('transitionend', endFn)

                    function endFn() {
                        /*
                            循环定时器   				回调函数的头部第一行清定时器
                            DOM2 绑定 transitionend事件    回调函数的头部第一行解绑事件
                        */
                        /* 
                            1.超过1/2的位置（一开始loading图为隐藏）则显示loading图
                            2.发送请求，处理请求，渲染页面
                         */
                        content.removeEventListener("transitionend", endFn);
                        content.removeEventListener("webkitTransitionEnd", endFn);
                        content.style.transition = "none";
                        for (var i = 0; i < loadings.length; i++) {
                            loadings[i].style.opacity = 1;
                        }
                        disX > 0 ? now-- : now++;
                        if (now < 0) {
                            now = aNodes.length - 1;
                        } else if (now > aNodes.length - 1) {
                            now = 0;
                        }
                        common.css(smallG, 'translateX', aNodes[now].offsetLeft)
                        for (var i = 0; i < aNodes.length; i++) {
                            if (smallG.offsetWidth != aNodes[now].offsetWidth) {
                                smallG.style.width = aNodes[now].offsetWidth + 'px'
                            }
                        }

                        setTimeout(function () {
                            for (var i = 0; i < loadings.length; i++) {
                                loadings[i].style.opacity = 0;
                            }
                            common.css(content, 'translateX', -w)
                            isOver = false;

                        }, 2000);
                    }
                }
            }
        }


        //  竖向滚动条
        scrollBar();

        function scrollBar() {
            // 滑屏元素
            var content = document.querySelector('#wrap .content > div');
            // 滑屏区域
            var wrap = document.querySelector('#wrap .content');
            var headBottom = document.querySelector('#wrap .head .head-bottom');
            var head = document.querySelector('#wrap .head')
            var carousel = document.querySelector('#wrap .content > div > .carousel-wrap');
            var bar = document.querySelector('#wrap .scrollBar');
            var barHeight =document.documentElement.clientHeight*(document.documentElement.clientHeight/content.offsetHeight) + 'px';
            bar.style.height = barHeight;
            // 此时carousel获取不到高度
            var minY = wrap.clientHeight - content.offsetHeight;
            var start = {};
            var element = {};
            // 防抖动
            var isY = true;
            var isFirst = true;
            var timer = 0;
            var Tween = {
                Linear: function (t, b, c, d) {
                    return c * t / d + b;
                },
                back: function (t, b, c, d, s) {
                    if (s == undefined) s = 1.70158;
                    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
                }
            }
            // 快速滑屏
            var lastPoint = 0;
            var lastTime = 0;
            var pointDis = 0;
            var timeDis = 1;
            var speed = 0;
            content.addEventListener('touchstart', function (ev) {
                ev = ev || event;
                var touchC = ev.changedTouches[0];
                // 重置minY
                minY = wrap.clientHeight - content.offsetHeight;
                // console.log(carousel.offsetHeight)
                start = {
                    x: touchC.clientX,
                    y: touchC.clientY
                };
                element.y = common.css(content, 'translateY');
                element.x = common.css(content, 'translateX');
                content.style.transition = 'none';

                
                lastPoint = touchC.clientY;
                lastTime = new Date().getTime();
                isY = true;
                isFirst = true;
                clearInterval(timer);
                pointDis = 0;
            })
            content.addEventListener('touchmove', function (ev) {
                if (!isY) {
                    return;
                }
                ev = ev || event;
                var touchC = ev.changedTouches[0];
                var now = {
                    x: touchC.clientX,
                    y: touchC.clientY
                };
                var dis = {
                    x: now.x - start.x,
                    y: now.y - start.y
                };
                var translateY = element.y + dis.y;

                var nowPoint = touchC.clientY;
                var nowTime = new Date().getTime();
                pointDis = nowPoint - lastPoint;
                timeDis = nowTime - lastTime;
                if (translateY > 0) {
                    content.handMove = true;
                    var scale = document.documentElement.clientHeight / ((document.documentElement
                        .clientHeight + translateY) * 1.5);
                    translateY = element.y + dis.y * scale;
                } else if (translateY < minY) {
                    content.handMove = true;
                    var over = minY - translateY;
                    var scale = document.documentElement.clientHeight / ((document.documentElement
                        .clientHeight + over) * 1.5);
                    translateY = element.y + dis.y * scale;
                }

                if (isFirst) {
                    isFirst = false;
                    if (Math.abs(dis.x) > Math.abs(dis.y)) {
                        isY = false;
                        return;
                    }
                }
                /*滚动条滚动的实时距离/滚动条能滚动的最远距离   =  内容滚动的实时距离/内容能滚动的最远距离*/
                var scale = document.documentElement.clientHeight * (translateY/content.offsetHeight);
                
                barHeight = document.documentElement.clientHeight*(document.documentElement.clientHeight/(content.offsetHeight + translateY)) + 'px'
                bar.style.height = barHeight;
                common.css(content, 'translateY', translateY);
                common.css(bar, 'translateY', -scale);
                lastPoint = nowPoint;
                lastTime = nowTime;
            })
            content.addEventListener('touchend', function () {
                if (!isY) {
                    return;
                }
                var translateY = common.css(content, 'translateY');
                if (content.handMove) {
                    if (translateY > 0) {
                        translateY = 0;
                        content.style.transition = '1s transform';
                        common.css(bar,'translateY',translateY);
                        common.css(content, 'translateY', translateY);
                    } else if (translateY < minY) {
                        translateY = minY;
                        content.style.transition = '1s transform';
                        common.css(bar,'translateY',0);
                    }
                    common.css(content, 'translateY', translateY);
                    content.handMove = false;
                } else {
                    speed = pointDis / timeDis;
                    speed = Math.abs(speed) < 0.5 ? 0 : speed;
                    var targetY = translateY + speed * 200;
                    bar.style.transition = '1s transform';
                    var scale = document.documentElement.clientHeight * (targetY/content.offsetHeight);
                    common.css(bar, 'translateY', -scale);
                    var time = Math.abs(speed) * 0.2;
                    time = time < 0.8 ? 0.8 : time;
                    time = time > 2 ? 2 : time;
                    var type = 'Linear';
                    if (targetY > 0) {
                        targetY = 0;
                        type = 'back';
                        var scale = document.documentElement.clientHeight * (targetY/content.offsetHeight);
                        common.css(bar, 'translateY', -scale);
                    } else if (targetY < minY) {
                        targetY = minY;
                        type = 'back';
                        common.css(bar,'translateY',0);
                    }
                        bsr(type, targetY, time);
                        common.css(content, 'translateY', targetY);
                    }
            })

            function bsr(type, targetY, time) {
                clearInterval(timer);
                // 当前次数
                var t = 0;
                //初始位置
                var b = common.css(content,'translateY');
                // 最终位置与初始位置之间的差值
                var c = targetY - b;
                // 总次数
                var d = time * 1000 / (1000 / 60);
                timer = setInterval(() => {
                    t++;
                    if (t > d) {
                        clearInterval(timer);
                    }
                    var point = Tween[type](t, b, c, d);
                    /*滚动条滚动的实时距离/滚动条能滚动的最远距离   =  内容滚动的实时距离/内容能滚动的最远距离*/
                    barHeight = document.documentElement.clientHeight*(document.documentElement.clientHeight/(content.offsetHeight + common.css(content,'translateY'))) + 'px';
                    bar.style.height = barHeight;
                    common.css(content,"translateY", point);
                }, 1000 / 60);
            }
        }
    }
</script>

</html>